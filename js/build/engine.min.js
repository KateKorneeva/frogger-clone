var Engine=function(a){function b(){var a=Date.now(),c=(a-j)/1e3;d(c),h(),j=a,l.requestAnimationFrame(b)}function c(){j=Date.now(),b()}function d(a){e(a),f(),g()}function e(a){allEnemies.forEach(function(b){b.update(a)}),player.update()}function f(){for(var a in allEnemies)player.x<=allEnemies[a].x+60&&player.x>allEnemies[a].x-allEnemies[a].dx&&player.y===allEnemies[a].y+7&&(player.score=0,player.startPlayer())}function g(){for(var a=0,b=gems.length;b>a;a++){var c=colWidth-gemFitX,d=rowHeight-gemFitY;player.x<=gems[a].x+c&&player.x>gems[a].x-c&&player.y<=gems[a].y+d&&player.y>gems[a].y-d&&(player.countScore(gems[a].dScoreGem),gems[a].randomizeAppear())}}function h(){var a,b,c=["images/water-block.png","images/stone-block.png","images/stone-block.png","images/stone-block.png","images/grass-block.png","images/grass-block.png"],d=6,e=5;for(a=0;d>a;a++)for(b=0;e>b;b++)o.drawImage(Resources.get(c[a]),b*colWidth,a*rowHeight);i()}function i(){allEnemies.forEach(function(a){a.render()}),player.render(),gems.forEach(function(a){a.render()})}var j,k=a.document,l=a.window,m=k.createElement("div"),n=k.createElement("canvas"),o=n.getContext("2d");n.width=505,n.height=606,m.id="score-displ",k.body.appendChild(m),k.body.appendChild(n),Resources.load(["images/stone-block.png","images/water-block.png","images/grass-block.png","images/gem-blue.png","images/gem-orange.png","images/gem-green.png","images/enemy-bug.png","images/char-boy.png"]),Resources.onReady(c),a.ctx=o,a.canvas=n,a.scoreDispl=m}(this);