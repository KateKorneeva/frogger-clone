var Enemy=function(){this.sprite="images/enemy-bug.png",this.dTrack=rowHeight,this.startBug()};Enemy.prototype.update=function(a){this.x=this.x+this.dx*a,this.x>canvas.width&&this.startBug()},Enemy.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},Enemy.prototype.randomizeSpeed=function(a,b){return randomize(a,b)},Enemy.prototype.randomizeRoad=function(){for(var a,b=randomize(0,4),c=0;3>c;c++)b===c+1&&(a=firstTrackY+this.dTrack*c);return a},Enemy.prototype.startBug=function(){this.x=-50,this.y=this.randomizeRoad(),this.dx=this.randomizeSpeed(50,200)};var Player=function(){this.sprite="images/char-boy.png",this.score=0,this.startPlayer(),this.handleInput()};Player.prototype.update=function(){this.displayScore(this.score)},Player.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)},Player.prototype.handleInput=function(a){switch(this.dx=colWidth,this.dy=rowHeight,a){case"left":this.x=this.x>0?this.x-this.dx:this.x;break;case"right":this.x=this.x<canvas.width-2*this.dx?this.x+this.dx:this.x;break;case"up":this.y=this.y>0?this.y-this.dy:this.y;break;case"down":this.y=this.y<canvas.height-3*this.dy?this.y+this.dy:this.y;break;default:this.x=this.x,this.y=this.y}},Player.prototype.startPlayer=function(){this.x=playerStartX,this.y=playerStartY},Player.prototype.countScore=function(a){this.dScore=a,this.score=this.score+this.dScore},Player.prototype.displayScore=function(a){scoreDispl.innerHTML="Your score is: "+a};var Gem=function(){this.randomizeAppear()};Gem.prototype.randomizeAppear=function(){this.xCol=randomize(0,6)-1,this.x=this.xCol*colWidth,this.yCol=randomize(0,4),this.y=this.yCol*rowHeight-gemFitY},Gem.prototype.render=function(){ctx.drawImage(Resources.get(this.sprite),this.x,this.y)};var GemOrange=function(){Gem.call(this),this.sprite="images/gem-orange.png",this.dScoreGem=lowScore};GemOrange.prototype=Object.create(Gem.prototype),GemOrange.prototype.constructor=Gem;var GemGreen=function(){Gem.call(this),this.sprite="images/gem-green.png",this.dScoreGem=middleScore};GemGreen.prototype=Object.create(Gem.prototype),GemGreen.prototype.constructor=Gem;var GemBlue=function(){Gem.call(this),this.sprite="images/gem-blue.png",this.dScoreGem=highScore};GemBlue.prototype=Object.create(Gem.prototype),GemBlue.prototype.constructor=Gem;var randomize=function(a,b){return Math.floor(Math.random()*(a-b+1))+b},colWidth=101,rowHeight=83,firstTrackY=76,playerStartX=200,playerStartY=415,gemFitX=5,gemFitY=15,lowScore=10,middleScore=20,highScore=30,allEnemies=[new Enemy,new Enemy,new Enemy],player=new Player,gems=[new GemOrange,new GemGreen,new GemBlue];document.addEventListener("keyup",function(a){var b={37:"left",38:"up",39:"right",40:"down"};player.handleInput(b[a.keyCode])});